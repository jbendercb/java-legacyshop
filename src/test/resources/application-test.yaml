spring:
  mvc:
    problemdetails:
      enabled: true
  datasource:
    url: jdbc:h2:mem:testdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driverClassName: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: none
    open-in-view: false
    show-sql: true
  sql:
    init:
      mode: always
  h2:
    console:
      enabled: true

# Test-specific business configuration
business:
  promotions:
    tier1:
      threshold: 50.00
      discount: 0.05
    tier2:
      threshold: 100.00
      discount: 0.10
    tier3:
      threshold: 200.00
      discount: 0.15
  
  loyalty:
    points-per-dollar: 1.0
    max-points: 500
  
  payments:
    auth-url: "http://localhost:8080/mock/payment/authorize"
    timeout-seconds: 5  # Shorter timeout for tests
  
  inventory:
    default-restock-quantity: 50  # Smaller quantity for tests

server:
  port: 0  # Random port for tests

logging:
  level:
    com.example.legacyshop: DEBUG
    org.springframework.retry: DEBUG
    org.hibernate.SQL: DEBUG
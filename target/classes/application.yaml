spring:
  mvc:
    problemdetails:
      enabled: true
  datasource:
    url: jdbc:h2:mem:legacyshop;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driverClassName: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: none
    open-in-view: false
  sql:
    init:
      mode: always
  h2:
    console:
      enabled: true

# Business Configuration - Key to demonstrating config-driven promotions
business:
  promotions:
    # Discount tiers based on order total
    tier1:
      threshold: 50.00
      discount: 0.05  # 5%
    tier2:
      threshold: 100.00
      discount: 0.10  # 10%
    tier3:
      threshold: 200.00
      discount: 0.15  # 15%
  
  loyalty:
    # Points earned per dollar spent (after PAID status)
    points-per-dollar: 1.0
    # Maximum points a customer can accumulate
    max-points: 500
  
  payments:
    # Mock external payment service URL
    auth-url: "http://localhost:8080/mock/payment/authorize"
    # Timeout for payment calls
    timeout-seconds: 10
  
  inventory:
    # Default restock quantity for scheduled replenishment
    default-restock-quantity: 100

server:
  port: 8080

logging:
  level:
    com.example.legacyshop: DEBUG
    org.springframework.retry: DEBUG